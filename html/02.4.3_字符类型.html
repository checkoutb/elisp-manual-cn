<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="elisp.css"><title>2.4.3 字符类型</title></head><body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000"><h3 class="subsection">2.4.3 字符类型</h3>
<div class="nav-panel"><p>Next: <a href="02.4.4_符号类型.html">符号类型</a>, Previous: <a href="02.4.2_浮点型.html">浮点型</a>, Up: <a href="02.4_编程类型.html">编程类型.</a> &nbsp; [<a href="00_content.htm" title="Table of contents" rel="contents">Contents</a>]</p></div></body></html><hr/><p>Emacs Lisp 中的字符只不过是一个整数。换句话说，字符由它们的字符代码表示。例如，字符 A 表示为整数 65。
</p>
<p>程序中偶尔会使用单个字符，但更常见的是使用字符串，它是由字符组成的序列。请参阅字符串类型。
</p>
<p>字符串和缓冲区中的字符目前限制在 0 到 4194303 的范围内——22 位（参见字符代码）。代码 0 到 127 是 ASCII 代码；  其余的是非 ASCII（请参阅非 ASCII 字符）。代表键盘输入的字符范围更广，可以对修饰键（如 Control、Meta 和 Shift）进行编码。
</p>
<p>为了消息的缘故，有一些特殊的函数可以生成人类可读的字符文本描述。请参阅描述帮助消息的字符。
</p>
<ol>
<li>
2.4.3.1 基本字符语法


<p>由于字符实际上是整数，因此字符的打印表示是十进制数。这也是字符的一种可能的读取语法，但在 Lisp 程序中以这种方式编写字符并不是清晰的编程。您应该始终使用 Emacs Lisp 为字符提供的特殊读取语法格式。这些语法格式以问号开头。
</p>
<p>字母数字字符的通常读取语法是问号后跟字符；  因此， <code>?A</code> 表示字符 A， <code>?B</code> 表示字符 B， <code>?a</code> 表示字符 a。
</p>
<p>例如：
</p><div class="lisp">
<pre class="lisp">?Q ⇒ 81     ?q ⇒ 113
</pre></div>
<p>您可以对标点字符使用相同的语法。但是，如果标点符号在 Lisp 中具有特殊的句法含义，则必须用 ’\’ 将其引用。例如，’?\(’ 是左括号字符的书写方式。同样，如果字符是 ’\’，则必须使用第二个 ’\’ 来引用它：’?\\’。
</p>
<p>您可以将字符 control-g、退格、制表符、换行符、垂直制表符、换页、空格、回车、del 和转义表示为 ’?’、’?’、’?’、’?\ n’、’?’、’?’、’?’、’?’、’?’ 和 ’?’。（’?’ 后跟一个破折号有不同的含义——它将 Super 修饰符应用于后面的字符。）因此，
</p>
<div class="lisp">
<pre class="lisp">?\a ⇒ 7                 ; control-g, C-g
?\b ⇒ 8                 ; backspace, BS, C-h
?\t ⇒ 9                 ; tab, TAB, C-i
?\n ⇒ 10                ; newline, C-j
?\v ⇒ 11                ; vertical tab, C-k
?\f ⇒ 12                ; formfeed character, C-l
?\r ⇒ 13                ; carriage return, RET, C-m
?\e ⇒ 27                ; escape character, ESC, C-[
?\s ⇒ 32                ; space character, SPC
?\\ ⇒ 92                ; backslash character, \
?\d ⇒ 127               ; delete character, DEL
</pre></div>
<p>这些以反斜杠开头的序列也称为转义序列，因为反斜杠扮演转义字符的角色；  这与字符 ESC 无关。” 用于字符常量；  在字符串常量中，只写空格。
</p>
<p>在没有特殊转义含义的任何字符之前允许使用反斜杠，并且无害；  因此，’?\+’ 等价于 ’?+’。没有理由在大多数字符之前添加反斜杠。但是，您必须在任何字符 ’()[]\;"’ 之前添加反斜杠，并且应该在任何字符 ’|’‘#.,’ 之前添加反斜杠，以避免混淆用于编辑 Lisp 的 Emacs 命令代码。您还应该在类似于前面提到的 ASCII 字符的 Unicode 字符之前添加反斜杠，以避免混淆阅读您的代码的人。Emacs 将突出显示一些非转义的常见混淆字符，例如 ”’ 以鼓励这一点。您还可以添加在空格字符（例如空格、制表符、换行符和换页符）之前的反斜杠。但是，使用易于阅读的转义序列之一（例如 ” 或 ”）而不是实际的空格字符（例如一个制表符或一个空格。（如果你写反斜杠后跟一个空格，你应该在字符常量后面写一个额外的空格来将它与下面的文本分开。）
</p>
</li><li>
2.4.3.2 通用转义语法


<p>除了特殊重要控制字符的特定转义序列之外，Emacs 还提供了几种类型的转义语法，您可以使用它们来指定非 ASCII 文本字符。
</p>
<ol>
<li>
您可以通过其 Unicode 名称指定字符（如果有）。?表示名为 NAME 的 Unicode 字符。因此，’?’ 等价于 ?à 并表示 Unicode 字符 U+00E0。为了简化输入多行字符串，您可以将名称中的空格替换为非空的空白序列（例如，换行符）。
</li><li>
您可以通过其 Unicode 值指定字符。?表示具有 Unicode 代码点 X 的字符，其中 X 是十六进制数。此外，?和 ?分别表示代码点 xxxx 和 xxxxxxxx，其中每个 x 是单个十六进制数字。例如，?、?00e0 和 ?000000E0 都等价于 ?à 和 ’?’。Unicode 标准仅定义代码点至 ’U+10ffff’，因此如果您指定的代码点高于此，Emacs 会发出错误信号。
</li><li>
您可以通过十六进制字符代码指定字符。十六进制转义序列由反斜杠、 <code>x</code> 和十六进制字符代码组成。因此，’?41’ 是字符 A，’?1’ 是字符 Ca，而 ?0 是字符 à（带有重音的 a）。您可以使用任意数量的十六进制数字，因此您可以用这种方式表示任何字符代码。
</li><li>
您可以通过八进制字符代码指定字符。一个八进制转义序列由一个反斜杠后跟最多三个八进制数字组成；  因此，字符 A 为 <code>?\101</code> ，字符 Ca 为 <code>?\001</code> ，字符 Cb 为 ?\002。只能以这种方式指定八进制代码 777 以内的字符。
</li></ol>
<p>这些转义序列也可以用在字符串中。请参阅字符串中的非 ASCII 字符。
</p>
</li><li>
2.4.3.3 控制字符语法


<p>可以使用另一种读取语法来表示控制字符。这由一个问号后跟一个反斜杠、插入符号和相应的非控制字符组成，无论是大写还是小写。例如，’?\<em>^I</em>’ 和 ’?\<em>^i</em>’ 都是字符 Ci 的有效读取语法，该字符的值为 9。
</p>
<p>您可以使用 ’C-’ 代替 ’^’；  因此，’?-i’ 等价于 ’?\<em>^I</em>’ 和 ’?\<em>^i</em>’：
</p>
<div class="lisp">
<pre class="lisp">?\^I ⇒ 9     ?\C-I ⇒ 9
</pre></div>
<p>在字符串和缓冲区中，唯一允许的控制字符是那些存在于 ASCII 中的字符；  但出于键盘输入目的，您可以使用 <code>C-</code> 将任何字符转换为控制字符。这些非 ASCII 控制字符的字符代码包括 2**26 位以及对应的非控制字符的代码。并非所有文本终端都可以生成非 ASCII 控制字符，但使用 X 和其他窗口系统可以直接生成它们。
</p>
<p>由于历史原因，Emacs 将 DEL 字符视为 ? 的控制等价物：
</p>
<div class="lisp">
<pre class="lisp">?\^? ⇒ 127     ?\C-? ⇒ 127
</pre></div>
<p>因此，目前无法使用’-’来表示字符 Control-?，它是 X 下有意义的输入字符。改变这一点并不容易，因为各种 Lisp 文件都以这种方式引用 DEL。
</p>
<p>为了表示要在文件或字符串中找到的控制字符，我们推荐使用 ’^’ 语法；  对于键盘输入中的控制字符，我们更喜欢 <code>C-</code> 语法。你用哪一个不影响程序的意思，但可能会指导阅读它的人的理解。
</p>
</li><li>
2.4.3.4 元字符语法


<p>元字符是使用 META 修饰键键入的字符。表示此类字符的整数设置了 2**27 位。我们为此修饰符和其他修饰符使用高位，以使广泛的基本字符代码成为可能。
</p>
<p>在字符串中，附加在 ASCII 字符上的 2**7 位表示元字符；  因此，可以放入字符串中的元字符的编码范围从 128 到 255，并且是普通 ASCII 字符的元版本。有关字符串中 META 处理的详细信息，请参阅将键盘事件放入字符串中。
</p>
<p>元字符的读取语法使用’-’。例如，’?-A’ 代表 MA。您可以将 ’-’ 与八进制字符代码（见下文）、’-’ 或任何其他字符语法一起使用。因此，您可以将 MA 写为 ’?-A’ 或 ’?-\101’。同样，您可以将 CMb 写为 ’?–b’、’?–b’ 或 ’?-\002’。
</p>
</li><li>
2.4.3.5 其他字符修饰符位


<p>图形字符的大小写由其字符代码表示；  例如，ASCII 区分字符 <code>a</code> 和 <code>A</code> 。但是 ASCII 无法表示控制字符是大写还是小写。Emacs 使用 2**25 位来指示在键入控制字符时使用了 shift 键。这种区别只有在图形显示上才有可能，例如 X 上的 GUI 显示；  文本终端不报告区别。移位位的 Lisp 语法是 ’§-’；  因此，’?-§-o’ 或 ’?-§-O’ 表示 shift-control-o 字符。
</p>
<p>X Window 系统定义了另外三个可以在字符中设置的修饰符位：hyper、super 和 alt。这些位的语法是 ’-’、’-’ 和 ’-’。（在这些前缀中大小写很重要。）因此，’?—x’ 代表 Alt-Hyper-Meta-x。（注意，” 后面没有’-’ 表示空格字符。）从数值上看，位值是 2**22 用于 alt，2**23 用于 super，2**24 用于 hyper。
</p></li></ol>
<hr/>

<div class="nav-panel"><p>Next: <a href="02.4.4_符号类型.html">符号类型</a>, Previous: <a href="02.4.2_浮点型.html">浮点型</a>, Up: <a href="02.4_编程类型.html">编程类型.</a> &nbsp; [<a href="00_content.htm" title="Table of contents" rel="contents">Contents</a>]</p></div></body></html>
<script>document.onkeydown=checkKey;function checkKey(e){if(e.keyCode=='39'){location="02.4.4_符号类型.html";}else if(e.keyCode=='37'){location="02.4.2_浮点型.html" } }</script>